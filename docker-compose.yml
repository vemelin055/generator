version: '3.8'

services:
  app:
    build: .
    ports:
      - "5001:5000"
    environment:
      # Flask settings
      - PORT=5000
      - FLASK_DEBUG=0
      
      # Groq API (required)
      - GROQ_API_KEY=${GROQ_API_KEY}
      
      # OpenRouter API (optional, for DeepSeek fallback)
      - OPENROUTER_API_KEY=${OPENROUTER_API_KEY:-}
      - OPENROUTER_REFERER=${OPENROUTER_REFERER:-}
      - OPENROUTER_APP_TITLE=${OPENROUTER_APP_TITLE:-}
      
      # Google Credentials (required - use one of these)
      # Option 1: Raw JSON string
      - GOOGLE_CREDENTIALS_JSON=${GOOGLE_CREDENTIALS_JSON}
      # Option 2: Base64 encoded JSON (alternative to above)
      # - GOOGLE_CREDENTIALS_BASE64=${GOOGLE_CREDENTIALS_BASE64}
    volumes:
      # Optional: mount local .env file if you want to test locally
      - ./.env:/app/.env:ro
    restart: unless-stopped
